<html>
  <head>
    <style type="text/css">
      #cartodb-inf-map {
        width: 634px;
        height: 520;
        background-color: #fff;
        float: left;
        overflow: hidden;
        z-index: 1;
      }
      #inf-map{
        width: 634px;
        height: 522px;
        background-color: #fff;
        float: left;
        z-index: 0;
      }
    </style>
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.12/themes/css/cartodb.css" />
    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.12/cartodb.js"></script>
    <script src="../../maps/inf-maps/maps_index.json"></script>

    <script type="text/javascript">
      function changeImage(a) {
      map = document.getElementById("inf-map")
      if(map.src != "../../maps/inf-maps/"+maps_index[a]+".png"){
        map.src= "../../maps/inf-maps/"+maps_index[a]+".png";
      }
    }

    window.onload = function() {
      cartodb.createVis('cartodb-inf-map', ' https://maboelnour.cartodb.com/api/v2/viz/01efa282-f50e-11e4-aba9-0e43f3deba5a/viz.json', {scrollwheel: 'disabled'}).done(function(vis, layers) {

        //==============================================
        vis.getNativeMap().doubleClickZoom.disable();
        vis.getNativeMap().dragging.disable();
        vis.getNativeMap().scrollWheelZoom.disable();
        //==============================================

        //==============================================
        var inf_map = "<img id=\"inf-map\" alt=\"Syria and Iraq 2014-onward War map\" src=\"../../maps/inf-maps/26-9-14.png\"/>"
        $('.cartodb-map-wrapper').prepend(inf_map);
        //==============================================

        //==============================================
        layers[2].on('change:time', function(time) {
          // console.log(time.time);
          var date = new Date(time.time);
          var day = date.getDate();
          var monthIndex = date.getMonth()+1;
          var year = date.getYear()-100;
          changeImage(day+"-"+monthIndex+"-"+year);
        });
        //==============================================

        //==============================================
        layers[0].setOpacity(0);
        //==============================================

        //==============================================
        // element = document.getElementsByClassName("cartodb-timeslider")[0]
        // element.style.bottom =  "-95px";
        // element.style.left =  "85px";
        //==============================================

      })
      .error(function(err) {
        alert(err);
      });
    }

    </script>
  </head>
  <body>
    <div id="cartodb-inf-map"></div>
  </body>
</html>